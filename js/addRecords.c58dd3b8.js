(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addRecords"],{1681:function(t,e,i){},"4bd4":function(t,e,i){"use strict";i("4de4"),i("7db0"),i("4160"),i("caad"),i("07ac"),i("2532"),i("159b");var n=i("5530"),o=i("58df"),r=i("7e2b"),a=i("3206");e["a"]=Object(o["a"])(r["a"],Object(a["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(o){o&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"973c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"addRecords"}},[i("h1",{staticClass:"font-weight-bold mb-6"},[t._v("新增紀錄")]),i("h3",{staticClass:"font-weight-bold mb-2"},[t._v("共 "+t._s(t.projects.length)+" 筆資料")]),t._l(t.projects,(function(e,n){return i("v-card",{key:e._id,staticClass:"mb-5",attrs:{"max-width":"100%",outlined:""}},[i("v-list-item",{attrs:{"three-line":""}},[e.edit?i("v-list-item-content",{staticClass:"d-block mt-2"},[i("v-form",{ref:"form",refInFor:!0},[i("v-text-field",{attrs:{label:"計畫標題",rules:t.titleRules,counter:"15",color:"blue-grey",outlined:"",clearable:""},model:{value:e.titleModel,callback:function(i){t.$set(e,"titleModel",i)},expression:"project.titleModel"}}),i("v-text-field",{attrs:{label:"副標題",rules:t.subtitleRules,counter:"50",color:"blue-grey",outlined:"",clearable:""},model:{value:e.subtitleModel,callback:function(i){t.$set(e,"subtitleModel",i)},expression:"project.subtitleModel"}}),i("v-textarea",{attrs:{label:"計畫說明",rules:t.descriptionRules,counter:"300",color:"blue-grey",outlined:"",clearable:""},model:{value:e.descriptionModel,callback:function(i){t.$set(e,"descriptionModel",i)},expression:"project.descriptionModel"}})],1)],1):i("v-list-item-content",[i("v-list-item-title",{staticClass:"headline"},[t._v(" "+t._s(e.title)+" ")]),i("v-list-item-subtitle",{staticClass:"subtitle-1"},[t._v(t._s(e.subtitle))]),i("v-list-item-subtitle",[t._v(t._s(e.description))])],1),i("v-list-item-avatar",{attrs:{tile:"",size:"120"}},[i("v-img",{attrs:{src:e.image}})],1)],1),i("v-card-actions",{staticClass:"mb-3"},[e.edit?t._e():i("v-btn",{staticClass:"ml-2 px-3",attrs:{color:"blue-grey",rounded:"",large:"",to:"/projects/"+e._id}},[t._v(" 進入計畫 ")]),e.edit?t._e():i("v-btn",{staticClass:"ml-2 px-3",attrs:{color:"blue-grey",rounded:"",large:""},on:{click:function(i){return t.edit(e)}}},[t._v(" 編輯計畫 ")]),e.edit?i("v-btn",{staticClass:"ml-2 px-3 black--text",attrs:{color:"amber",rounded:"",large:""},on:{click:function(i){return t.save(e)}}},[t._v(" 保存編輯 ")]):t._e(),e.edit?i("v-btn",{staticClass:"ml-2 px-3 font-weight-bold",attrs:{color:"red",rounded:"",large:"",outlined:""},on:{click:function(i){return t.cancel(e)}}},[t._v(" 取消編輯 ")]):t._e(),e.edit?t._e():i("v-btn",{staticClass:"ml-3 px-3 font-weight-bold",attrs:{color:"red",rounded:"",large:"",outlined:""},on:{click:function(i){return t.del(e,n)}}},[t._v(" 刪除計畫 ")])],1)],1)}))],2)},o=[],r=(i("a4d3"),i("e01a"),i("99af"),i("d81d"),i("a434"),{name:"AddRecords",data:function(){return{projects:[],titleRules:[function(t){return!!t||"必填欄位"},function(t){return t.length<=15||"請輸入 15 個字以下"},function(t){return t.length>=4||"請輸入 4 個字以上"}],subtitleRules:[function(t){return!!t||"必填欄位"},function(t){return t.length<=50||"請輸入 50 個字以下"}],descriptionRules:[function(t){return!!t||"必填欄位"},function(t){return t.length<=300||"請輸入 300 個字以下"}]}},computed:{user:function(){return this.$store.state.user}},methods:{del:function(t,e){var i=this;this.$swal({title:"確定刪除計畫?",icon:"warning",iconColor:"#FFC107",showCancelButton:!0,confirmButtonColor:"#607D8B",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(n){n.isConfirmed&&i.axios.delete("".concat("https://myfinalproject2021.herokuapp.com","/projects/").concat(t._id)).then((function(t){t.data.success?i.projects.splice(e,1):i.$swal({icon:"error",title:t.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})}))})).catch((function(t){i.$swal({icon:"error",title:t.response.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})}))},edit:function(t){t.edit=!0,t.titleModel=t.title,t.subtitleModel=t.subtitle,t.descriptionModel=t.description},cancel:function(t){t.edit=!1,t.titleModel=t.model,t.subtitleModel=t.subtitle,t.descriptionModel=t.description},save:function(t){var e=this;this.$refs.form[0].validate()&&this.axios.patch("".concat("https://myfinalproject2021.herokuapp.com","/projects/").concat(t._id),{title:t.titleModel,subtitle:t.subtitleModel,description:t.descriptionModel}).then((function(i){i.data.success?(t.edit=!1,t.title=t.titleModel,t.subtitle=t.subtitleModel,t.description=t.descriptionModel):e.$swal({icon:"error",title:i.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})})).catch((function(t){e.$swal({icon:"error",title:t.response.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})}))}},mounted:function(){var t=this;this.axios.get("".concat("https://myfinalproject2021.herokuapp.com","/projects?user=").concat(this.user.id)).then((function(e){e.data.success?t.projects=e.data.result.map((function(t){return t.image="".concat("https://myfinalproject2021.herokuapp.com","/projects/image/").concat(t.image),t.edit=!1,t})):t.$swal({icon:"error",title:e.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})})).catch((function(e){t.$swal({icon:"error",title:e.response.data.message,confirmButtonColor:"#607D8B",confirmButtonText:"確定"})}))}}),a=r,s=i("2877"),l=i("6544"),c=i.n(l),u=i("8336"),d=i("b0af"),h=i("99d9"),f=i("4bd4"),p=i("adda"),m=i("da13"),v=i("8270"),b=i("5d23"),g=i("8654"),w=i("a844"),B=Object(s["a"])(a,n,o,!1,null,null,null);e["default"]=B.exports;c()(B,{VBtn:u["a"],VCard:d["a"],VCardActions:h["a"],VForm:f["a"],VImg:p["a"],VListItem:m["a"],VListItemAvatar:v["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VTextField:g["a"],VTextarea:w["a"]})},a844:function(t,e,i){"use strict";i("a9e3");var n=i("5530"),o=(i("1681"),i("8654")),r=i("58df"),a=Object(r["a"])(o["a"]);e["a"]=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(n["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"}},genInput:function(){var t=o["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){o["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);
//# sourceMappingURL=addRecords.c58dd3b8.js.map